{
 "actions": [],
 "creation": "2025-06-21 22:45:07.030425",
 "doctype": "DocType",
 "document_type": "Setup",
 "editable_grid": 1,
 "engine": "InnoDB",
 "field_order": [
  "general_tab",
  "server_enabled",
  "server_version",
  "mcp_endpoint_url",
  "oauth_discovery_url",
  "plugins_tab",
  "plugins_section",
  "enabled_plugins_list",
  "plugin_status_html",
  "streaming_tab",
  "streaming_section",
  "enforce_artifact_streaming",
  "response_limit_prevention",
  "streaming_behavior_instructions",
  "streaming_line_threshold",
  "streaming_char_threshold",
  "mcp_configuration_tab",
  "mcp_section",
  "mcp_server_name",
  "mcp_protocol_version",
  "mcp_transport_type",
  "oauth_tab",
  "oauth_authorization_section",
  "enable_dynamic_client_registration",
  "allowed_public_client_origins",
  "oauth_advanced_section",
  "show_auth_server_metadata",
  "show_protected_resource_metadata",
  "oauth_metadata_section",
  "resource_name",
  "resource_documentation",
  "oauth_column_break_2",
  "resource_policy_uri",
  "resource_tos_uri",
  "scopes_supported",
  "advanced_tab",
  "sse_bridge_section",
  "sse_bridge_warning",
  "sse_bridge_enabled",
  "sse_bridge_port",
  "sse_bridge_host",
  "sse_bridge_debug",
  "sse_bridge_status_html"
 ],
 "fields": [
  {
   "fieldname": "general_tab",
   "fieldtype": "Tab Break",
   "label": "General"
  },
  {
   "default": "1",
   "description": "Enable or disable the Frappe Assistant Core MCP server",
   "fieldname": "server_enabled",
   "fieldtype": "Check",
   "label": "Enable Assistant Core"
  },
  {
   "fieldname": "server_version",
   "fieldtype": "Data",
   "label": "Server Version",
   "read_only": 1,
   "default": "2.0.0"
  },
  {
   "fieldname": "mcp_endpoint_url",
   "fieldtype": "Data",
   "label": "MCP Endpoint URL",
   "read_only": 1,
   "description": "Main MCP StreamableHTTP endpoint"
  },
  {
   "fieldname": "oauth_discovery_url",
   "fieldtype": "Data",
   "label": "OAuth Discovery URL",
   "read_only": 1,
   "description": "OAuth/OIDC discovery endpoint for MCP Inspector"
  },
  {
   "fieldname": "plugins_tab",
   "fieldtype": "Tab Break",
   "label": "Plugins & Tools"
  },
  {
   "fieldname": "plugins_section",
   "fieldtype": "Section Break",
   "label": "Plugin Configuration"
  },
  {
   "default": "[\"core\"]",
   "fieldname": "enabled_plugins_list",
   "fieldtype": "JSON",
   "hidden": 1,
   "label": "Enabled Plugins"
  },
  {
   "fieldname": "plugin_status_html",
   "fieldtype": "HTML",
   "label": "Plugin Status",
   "options": "<div id=\"plugin-status-container\">Loading plugin information...</div>"
  },
  {
   "fieldname": "streaming_tab",
   "fieldtype": "Tab Break",
   "label": "Streaming"
  },
  {
   "fieldname": "streaming_section",
   "fieldtype": "Section Break",
   "label": "Artifact Streaming Configuration"
  },
  {
   "default": "1",
   "description": "Require all LLMs to use artifact streaming for analysis operations",
   "fieldname": "enforce_artifact_streaming",
   "fieldtype": "Check",
   "label": "Enforce Artifact Streaming Protocol"
  },
  {
   "default": "1",
   "description": "Automatically promote artifact streaming to prevent LLM response limits",
   "fieldname": "response_limit_prevention",
   "fieldtype": "Check",
   "label": "Enable Response Limit Prevention"
  },
  {
   "default": "Always create analysis workspace artifacts before performing data analysis.\nStream all detailed work to artifacts to prevent response limits.\nKeep responses minimal with artifact references.\nBuild unlimited analysis depth via progressive artifact updates.",
   "description": "Additional behavioral instructions for LLMs using the MCP server",
   "fieldname": "streaming_behavior_instructions",
   "fieldtype": "Small Text",
   "label": "Custom Streaming Instructions"
  },
  {
   "default": "5",
   "description": "Number of lines in tool result that triggers artifact streaming",
   "fieldname": "streaming_line_threshold",
   "fieldtype": "Int",
   "label": "Line Threshold for Streaming"
  },
  {
   "default": "1000",
   "description": "Number of characters in tool result that triggers artifact streaming",
   "fieldname": "streaming_char_threshold",
   "fieldtype": "Int",
   "label": "Character Threshold for Streaming"
  },
  {
   "fieldname": "mcp_configuration_tab",
   "fieldtype": "Tab Break",
   "label": "MCP Configuration"
  },
  {
   "fieldname": "mcp_section",
   "fieldtype": "Section Break",
   "label": "MCP Server Settings"
  },
  {
   "fieldname": "mcp_server_name",
   "fieldtype": "Data",
   "label": "MCP Server Name",
   "default": "frappe-assistant-core",
   "description": "Name identifier for the MCP server"
  },
  {
   "fieldname": "mcp_protocol_version",
   "fieldtype": "Data",
   "label": "MCP Protocol Version",
   "read_only": 1,
   "default": "2025-03-26"
  },
  {
   "fieldname": "mcp_transport_type",
   "fieldtype": "Data",
   "label": "Transport Type",
   "read_only": 1,
   "default": "StreamableHTTP"
  },
  {
   "fieldname": "oauth_tab",
   "fieldtype": "Tab Break",
   "label": "OAuth"
  },
  {
   "fieldname": "oauth_authorization_section",
   "fieldtype": "Section Break",
   "label": "OAuth Configuration",
   "description": "Configure OAuth 2.0 settings for MCP clients (e.g., Claude Desktop, MCP Inspector)"
  },
  {
   "default": "1",
   "description": "Enable automatic OAuth client registration for MCP tools. When enabled, tools like MCP Inspector can connect without manual OAuth client setup.",
   "fieldname": "enable_dynamic_client_registration",
   "fieldtype": "Check",
   "label": "Enable Dynamic Client Registration"
  },
  {
   "description": "List of allowed origins for browser-based OAuth clients (one per line).<br>Use <code>*</code> to allow all origins, or specify URLs like <code>http://localhost:6274</code> for MCP Inspector.<br><b>Leave blank to block all public clients.</b>",
   "fieldname": "allowed_public_client_origins",
   "fieldtype": "Small Text",
   "label": "Allowed Public Client Origins",
   "depends_on": "eval:doc.enable_dynamic_client_registration"
  },
  {
   "fieldname": "oauth_advanced_section",
   "fieldtype": "Section Break",
   "label": "Advanced Discovery Settings",
   "collapsible": 1,
   "collapsible_depends_on": "eval:0",
   "description": "Controls which OAuth discovery endpoints are exposed. Most users should leave these enabled."
  },
  {
   "default": "1",
   "description": "Exposes OAuth server capabilities at <code>/.well-known/oauth-authorization-server</code>. Required for auto-discovery.",
   "fieldname": "show_auth_server_metadata",
   "fieldtype": "Check",
   "label": "Show Authorization Server Metadata"
  },
  {
   "default": "1",
   "description": "Exposes resource server info at <code>/.well-known/oauth-protected-resource</code>",
   "fieldname": "show_protected_resource_metadata",
   "fieldtype": "Check",
   "label": "Show Protected Resource Metadata"
  },
  {
   "fieldname": "oauth_metadata_section",
   "fieldtype": "Section Break",
   "label": "Resource Metadata (Optional)",
   "collapsible": 1,
   "collapsible_depends_on": "eval:0"
  },
  {
   "default": "Frappe Assistant Core",
   "description": "Display name for your resource server",
   "fieldname": "resource_name",
   "fieldtype": "Data",
   "label": "Resource Name"
  },
  {
   "default": "https://github.com/buildswithpaul/Frappe_Assistant_Core",
   "description": "Documentation URL for developers",
   "fieldname": "resource_documentation",
   "fieldtype": "Data",
   "label": "Documentation URL"
  },
  {
   "fieldname": "oauth_column_break_2",
   "fieldtype": "Column Break"
  },
  {
   "description": "Privacy policy URL",
   "fieldname": "resource_policy_uri",
   "fieldtype": "Data",
   "label": "Policy URI"
  },
  {
   "description": "Terms of service URL",
   "fieldname": "resource_tos_uri",
   "fieldtype": "Data",
   "label": "Terms of Service URI"
  },
  {
   "description": "Supported OAuth scopes (one per line)",
   "fieldname": "scopes_supported",
   "fieldtype": "Small Text",
   "label": "Supported Scopes"
  },
  {
   "fieldname": "advanced_tab",
   "fieldtype": "Tab Break",
   "label": "Advanced"
  },
  {
   "fieldname": "sse_bridge_section",
   "fieldtype": "Section Break",
   "label": "SSE Bridge Configuration (Deprecated)"
  },
  {
   "fieldname": "sse_bridge_warning",
   "fieldtype": "HTML",
   "options": "<div class=\"alert alert-warning\" style=\"margin-bottom: 15px;\"><h6><i class=\"fa fa-exclamation-triangle\"></i> Experimental Feature</h6><p><strong>Important:</strong> The SSE Bridge is an experimental feature that:</p><ul><li><strong>Does not work on Frappe Cloud</strong> - Only available for self-hosted installations</li><li>May have stability issues and is subject to breaking changes</li><li>Requires manual port management and process monitoring</li><li>Is intended for development and testing environments</li></ul><p><small>For production use, consider using the standard MCP bridge instead.</small></p></div>"
  },
  {
   "default": "1",
   "description": "Enable or disable the SSE MCP Bridge for real-time communication",
   "fieldname": "sse_bridge_enabled",
   "fieldtype": "Check",
   "label": "Enable SSE Bridge"
  },
  {
   "default": "8080",
   "description": "Port number for the SSE bridge server",
   "fieldname": "sse_bridge_port",
   "fieldtype": "Int",
   "label": "SSE Bridge Port"
  },
  {
   "default": "0.0.0.0",
   "description": "Host address to bind the SSE bridge server",
   "fieldname": "sse_bridge_host",
   "fieldtype": "Data",
   "label": "SSE Bridge Host"
  },
  {
   "default": "0",
   "description": "Enable debug mode for SSE bridge logging",
   "fieldname": "sse_bridge_debug",
   "fieldtype": "Check",
   "label": "Enable SSE Bridge Debug Mode"
  },
  {
   "fieldname": "sse_bridge_status_html",
   "fieldtype": "HTML",
   "label": "SSE Bridge Status",
   "options": "<div id=\"sse-bridge-status-container\">Loading SSE bridge status...</div>"
  }
 ],
 "issingle": 1,
 "links": [],
 "modified": "2025-08-12 17:50:12.690254",
 "modified_by": "Administrator",
 "module": "Assistant Core",
 "name": "Assistant Core Settings",
 "owner": "Administrator",
 "permissions": [
  {
   "create": 1,
   "delete": 1,
   "email": 1,
   "print": 1,
   "read": 1,
   "role": "System Manager",
   "share": 1,
   "write": 1
  }
 ],
 "sort_field": "modified",
 "sort_order": "DESC",
 "states": [],
 "track_changes": 1
}